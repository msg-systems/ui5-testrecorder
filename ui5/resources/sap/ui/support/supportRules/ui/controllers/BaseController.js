/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/support/supportRules/Storage","sap/ui/support/supportRules/Constants","sap/ui/support/supportRules/ui/models/SelectionUtils","sap/ui/support/supportRules/ui/models/PresetsUtils"],function(C,s,c,S,P){"use strict";return C.extend("sap.ui.support.supportRules.ui.controllers.BaseController",{onPersistedSettingSelect:function(){var m=this.getView().getModel();if(m.getProperty("/persistingSettings")){s.createPersistenceCookie(c.COOKIE_NAME,true);m.getProperty("/libraries").forEach(function(l){if(l.title==c.TEMP_RULESETS_NAME){s.setRules(l.rules);}});this.persistExecutionScope();this.persistVisibleColumns();S.persistSelection();P.persistSelectionPresets();}else{s.deletePersistenceCookie(c.COOKIE_NAME);this.deletePersistedData();}},persistExecutionScope:function(){var a={analyzeContext:this.model.getProperty("/analyzeContext"),subtreeExecutionContextId:this.model.getProperty("/subtreeExecutionContextId")},b=this.model.getProperty("/executionScopeComponents");s.setSelectedScopeComponents(b);s.setSelectedContext(a);},persistVisibleColumns:function(){var v=[],a=S.treeTable.getColumns();a.forEach(function(o){if(o.getVisible()){v.push(o.sId);}});s.setVisibleColumns(v);},deletePersistedData:function(){s.deletePersistenceCookie(c.COOKIE_NAME);this.getView().getModel().setProperty("/persistingSettings",false);s.removeAllData();}});});
