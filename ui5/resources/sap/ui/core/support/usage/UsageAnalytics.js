/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','../../Element','../../routing/Router'],function(q,E,R){"use strict";var a=["modelContextChange","beforeRendering","afterRendering","propertyChanged","aggregationChanged","componentCreated","afterInit","updateStarted","updateFinished","load"];var U={};U.enable=function(){E._trackEvent=function(e,o){U.trackEvent(e,o);};R._trackRouteMatched=function(c,r,A){U.trackRouteMatched(R.M_EVENTS.ROUTE_MATCHED,c,r,A);};};U.disable=function(){if(E._trackEvent){delete E._trackEvent;}if(R._trackRouteMatched){delete R._trackRouteMatched;}};U.trackEvent=function(e,o){q.sap.delayedCall(0,U,"_trackEvent",[e,new Date(),o]);};U.trackRouteMatched=function(e,s,r,A){q.sap.delayedCall(0,U,"_trackRouteMatched",[e,new Date(),s,r,A]);};U._trackEvent=function(e,t,o){var d={};if(U._isTrackable(e,o)){d={eventType:e,elementId:o.getId(),elementType:o.getMetadata().getName(),timestamp:t.getTime()};q.sap.log.debug("UsageAnalytics: Track Event: "+JSON.stringify(d));U._saveToBackend(d);}};U._trackRouteMatched=function(e,t,s,r,A){var d={eventType:e,elementId:s,elementType:"sap.ui.core.routing.Router",timestamp:t.getTime(),additionalAttributes:{routerInfo:r.getURL(A.name,A.arguments),fullURL:window.location.href,hash:window.location.hash}};q.sap.log.debug("UsageAnalytics: Track Route Matched: "+JSON.stringify(d));U._saveToBackend(d);};U._saveToBackend=function(d){var A=[d.timestamp,d.eventType,d.elementId,d.elementType],k;if(d.additionalAttributes){for(k in d.additionalAttributes){A.push(d.additionalAttributes[k]);}}if(window.swa){window.swa.trackCustomEvent.apply(window.swa,A);}else{q.sap.log.warning("UsageAnalytics; No SAP Web Analytics service is defined. Please provide a global"+" instance variable named <swa>");}};U._isTrackable=function(e,o){return a.indexOf(e)===-1&&U._isPublicElementEvent(e,o);};U._isPublicElementEvent=function(e,o){return!!o.getMetadata().getEvent(e);};return U;},true);
