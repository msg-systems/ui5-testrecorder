/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
(function(d,c){"use strict";var s,m,b,C;s=document.querySelector("[src$='runTest.js']");if(s){m=/^([^?#]*\/)?runTest.js/.exec(s.getAttribute("src"));if(m){b=m[1]+"../../../../";}}if(b==null){throw new Error("runTest.js: could not identify script tag!");}C=/(?:^|\?|&)coverage(?:&|=|$)/.test(window.location.search);function l(u,c){var p=u.length,a=0;function f(e){p--;if(e.type==='error'){a++;}e.target.removeEventListener("load",f);e.target.removeEventListener("error",f);if(p===0&&a===0&&c){c();}}for(var i=0;i<u.length;i++){var g=document.createElement("script");g.addEventListener("load",f);g.addEventListener("error",f);g.src=b+u[i];document.head.appendChild(g);}}l(["sap/ui/thirdparty/baseuri.js","sap/ui/thirdparty/es6-promise.js","sap/ui/thirdparty/es6-string-methods.js","sap/ui/thirdparty/es6-object-assign.js"],function(){l(["ui5loader.js"],function(){sap.ui.loader.config({async:!C});l(["ui5loader-autoconfig.js"],function(){sap.ui.require(d,c);});});});}(["sap/base/util/UriParameters","sap/ui/test/starter/_utils"],function(U,u){"use strict";function m(a){return Array.isArray(a)?a:[a];}function r(d){return new Promise(function(a,b){sap.ui.require(m(d),function(){a(arguments);},b);});}function c(a,b,f){if(b){for(var k in b){if(Object.prototype.hasOwnProperty.call(f,k)){a[k]=b[k];}}}return a;}function e(){function a(b){if(document.body.querySelector("#"+b)==null){var d=document.createElement("div");d.id=b;document.body.insertBefore(d,document.body.firstChild);}}return u.whenDOMReady().then(function(){a("qunit");a("qunit-fixture");});}var Q={altertitle:1,collapse:1,filter:1,fixture:1,hidepassed:1,maxDepth:1,module:1,moduleId:1,notrycatch:1,noglobals:1,seed:1,reorder:1,requireExpects:1,testId:1,testTimeout:1,scrolltop:1};function i(C){var a,b,d,f,g,h,q,j;document.title=C.title;if(C.loader){sap.ui.loader.config(C.loader);}if(C.qunit.version==="edge"||C.qunit.version===true){C.qunit.version=2;}if(typeof C.qunit.version==="number"){window.QUnit=window.QUnit||{};QUnit.config=QUnit.config||{};if(C.qunit!=null&&typeof C.qunit==='object'){c(QUnit.config,C.qunit,Q);}QUnit.config.autostart=false;a=new Promise(function(l,n){if(C.qunit.version===1){u.addStylesheet("sap/ui/thirdparty/qunit.css");l(r(q="sap/ui/thirdparty/qunit"));}else if(C.qunit.version===2){u.addStylesheet("sap/ui/thirdparty/qunit-2.css");l(r(q="sap/ui/thirdparty/qunit-2"));}else{throw new TypeError("unsupported qunit version "+C.qunit.version);}}).then(function(){j=[];QUnit.jUnitDone=function(l){j.push(l);};return r("sap/ui/qunit/qunit-junit");}).then(function(){delete QUnit.jUnitDone;return r("sap/ui/thirdparty/qunit-reporter-junit");}).then(function(){j.forEach(function(l){QUnit.jUnitDone(l);});j=undefined;});}if(C.sinon.version==="edge"||C.sinon.version===true){C.sinon.version=4;}if(typeof C.sinon.version==="number"){var k;if(C.sinon.version===1){b=r("sap/ui/thirdparty/sinon");k="sap/ui/thirdparty/sinon-qunit";}else if(C.sinon.version===4){b=r("sap/ui/thirdparty/sinon-4");k="sap/ui/qunit/sinon-qunit-bridge";}else{throw new TypeError("unsupported sinon version "+C.sinon.version);}if(C.sinon.qunitBridge&&a){d=Promise.all([a,b]).then(function(){return r(k);});}if(C.sinon!=null&&typeof C.sinon==='object'){f=Promise.all([b,d]).then(function(){sinon.config=c(sinon.config||{},C.sinon,sinon.defaultConfig);return arguments;});}}else if(q){sap.ui.loader.config({shim:{"sap/ui/thirdparty/sinon-qunit":{deps:[q,"sap/ui/thirdparty/sinon"]},"sap/ui/qunit/sinon-qunit-bridge":{deps:[q,"sap/ui/thirdparty/sinon-4"]}}});}g=a.then(function(){if(QUnit.urlParams.coverage){return r("sap/ui/thirdparty/blanket").then(function(){if(C.coverage&&window.blanket){if(C.coverage.only!=null){window.blanket.options("sap-ui-cover-only",C.coverage.only);}if(C.coverage.never!=null){window.blanket.options("sap-ui-cover-never",C.coverage.never);}if(C.coverage.branchTracking){window.blanket.options("branchTracking",true);}}return r("sap/ui/qunit/qunit-coverage");}).then(function(){QUnit.config.autostart=false;});}else{return r(["sap/ui/qunit/qunit-coverage"]);}});h=Promise.all([a,b,d,f,g]);if(C.beforeBootstrap){h=h.then(function(){return r(C.beforeBootstrap);});}window["sap-ui-config"]=C.ui5||{};if(Array.isArray(window["sap-ui-config"].libs)){window["sap-ui-config"].libs=window["sap-ui-config"].libs.join(",");}if(C.bootCore){h=h.then(function(){return new Promise(function(l,n){sap.ui.require(["sap/ui/core/Core"],function(o){o.boot();o.attachInit(l);});});});}return h.then(function(){if(C.autostart){return r(C.module).then(function(){return e();}).then(function(){QUnit.start();});}else{return e().then(function(){return r(C.module);});}});}var p=new U(window.location.href),s=u.getAttribute('data-sap-ui-testsuite')||p.get("testsuite"),t=u.getAttribute('data-sap-ui-test')||p.get("test");u.getSuiteConfig(s).then(function(S){var T=S.tests[t];if(!T){throw new TypeError("Invalid test name");}return i(T);}).catch(function(E){console.error(E.stack||E);u.whenDOMReady().then(function(){document.body.innerHTML="<pre style='color:red;'>"+u.encode(E.stack||E.message||String(E))+"</pre>";});});}));
