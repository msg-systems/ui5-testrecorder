/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/rta/command/FlexCommand'],function(F){"use strict";var M=F.extend("sap.ui.rta.command.Move",{metadata:{library:"sap.ui.rta",properties:{movedElements:{type:"any[]"},target:{type:"any"},source:{type:"any"}},associations:{},events:{}}});M.prototype._getChangeSpecificData=function(i){var s=i?this.getTarget():this.getSource();var t=i?this.getSource():this.getTarget();if(s.parent){s.id=s.parent.getId();delete s.parent;}if(t.parent){t.id=t.parent.getId();delete t.parent;}var S={changeType:this.getChangeType(),source:s,target:t,movedElements:[]};this.getMovedElements().forEach(function(m){S.movedElements.push({id:m.id||(m.element&&m.element.getId()),sourceIndex:i?m.targetIndex:m.sourceIndex,targetIndex:i?m.sourceIndex:m.targetIndex});});return S;};M.prototype.prepare=function(l,d){var s=F.prototype.prepare.apply(this,arguments);if(s){this._oPreparedUndoChange=this._createChangeFromData(this._getChangeSpecificData(true),l,d);}return s;};M.prototype.undo=function(){return this._applyChange(this._oPreparedUndoChange,true);};return M;},true);
