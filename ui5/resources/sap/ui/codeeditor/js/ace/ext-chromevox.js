ace.define("ace/ext/chromevox",["require","exports","module","ace/editor","ace/config"],function(r,e,m){var c={};c.SpeechProperty;c.Cursor;c.Token;c.Annotation;var C={'rate':0.8,'pitch':0.4,'volume':0.9};var D={'rate':1,'pitch':0.5,'volume':0.9};var E={'rate':0.8,'pitch':0.8,'volume':0.9};var K={'rate':0.8,'pitch':0.3,'volume':0.9};var S={'rate':0.8,'pitch':0.7,'volume':0.9};var V={'rate':0.8,'pitch':0.8,'volume':0.9};var a={'punctuationEcho':'none','relativePitch':-0.6};var b='ALERT_NONMODAL';var M='ALERT_MODAL';var N='INVALID_KEYPRESS';var I='insertMode';var d='start';var R=[{substr:';',newSubstr:' semicolon '},{substr:':',newSubstr:' colon '}];var f={SPEAK_ANNOT:'annots',SPEAK_ALL_ANNOTS:'all_annots',TOGGLE_LOCATION:'toggle_location',SPEAK_MODE:'mode',SPEAK_ROW_COL:'row_col',TOGGLE_DISPLACEMENT:'toggle_displacement',FOCUS_TEXT:'focus_text'};var g='CONTROL + SHIFT ';c.editor=null;var l=null;var h={};var s=false;var k=false;var n=false;var v=null;var o={};var p={};var q=function(i){return g+String.fromCharCode(i);};var t=function(){var i=c.editor.keyBinding.getKeyboardHandler();return i.$id==='ace/keyboard/vim';};var u=function(i){return c.editor.getSession().getTokenAt(i.row,i.column+1);};var w=function(i){return c.editor.getSession().getLine(i.row);};var x=function(i){if(h[i.row]){cvox.Api.playEarcon(b);}if(s){cvox.Api.stop();T(i);O(u(i));J(i.row,1);}else{J(i.row,0);}};var y=function(i){var j=w(i);var _=j.substr(i.column-1);if(i.column===0){_=' '+j;}var z1=/^\W(\w+)/;var A1=z1.exec(_);return A1!==null;};var z={'constant':{prop:C},'entity':{prop:E},'keyword':{prop:K},'storage':{prop:S},'variable':{prop:V},'meta':{prop:D,replace:[{substr:'</',newSubstr:' closing tag '},{substr:'/>',newSubstr:' close tag '},{substr:'<',newSubstr:' tag start '},{substr:'>',newSubstr:' tag end '}]}};var A={prop:A};var B=function(j,_){var z1=j;for(var i=0;i<_.length;i++){var A1=_[i];var B1=new RegExp(A1.substr,'g');z1=z1.replace(B1,A1.newSubstr);}return z1;};var F=function(i,_,z1){var A1={};A1.value='';A1.type=i[_].type;for(var j=_;j<z1;j++){A1.value+=i[j].value;}return A1;};var G=function(j){if(j.length<=1){return j;}var _=[];var z1=0;for(var i=1;i<j.length;i++){var A1=j[z1];var B1=j[i];if(P(A1)!==P(B1)){_.push(F(j,z1,i));z1=i;}}_.push(F(j,z1,j.length));return _;};var H=function(i){var j=c.editor.getSession().getLine(i);var _=/^\s*$/;return _.exec(j)!==null;};var J=function(i,j){var _=c.editor.getSession().getTokens(i);if(_.length===0||H(i)){cvox.Api.playEarcon('EDITABLE_TEXT');return;}_=G(_);var z1=_[0];_=_.filter(function(A1){return A1!==z1;});Q(z1,j);_.forEach(O);};var L=function(i){Q(i,0);};var O=function(i){Q(i,1);};var P=function(i){if(!i||!i.type){return;}var j=i.type.split('.');if(j.length===0){return;}var _=j[0];var z1=z[_];if(!z1){return A;}return z1;};var Q=function(i,j){var _=P(i);var z1=B(i.value,R);if(_.replace){z1=B(z1,_.replace);}cvox.Api.speak(z1,j,_.prop);};var T=function(i){var j=w(i);cvox.Api.speak(j[i.column],1);};var U=function(l,i){var j=w(i);var _=j.substring(l.column,i.column);_=_.replace(/ /g,' space ');cvox.Api.speak(_);};var W=function(l,i){if(Math.abs(l.column-i.column)!==1){var j=w(i).length;if(i.column===0||i.column===j){J(i.row,0);return;}if(y(i)){cvox.Api.stop();O(u(i));return;}}T(i);};var X=function(l,i){if(!c.editor.selection.isEmpty()){U(l,i);cvox.Api.speak('selected',1);}else if(k){U(l,i);}else{W(l,i);}};var Y=function(i){if(n){n=false;return;}var j=c.editor.selection.getCursor();if(j.row!==l.row){x(j);}else{X(l,j);}l=j;};var Z=function(i){if(c.editor.selection.isEmpty()){cvox.Api.speak('unselected');}};var $=function(i){switch(i.action){case'remove':cvox.Api.speak(i.text,0,a);n=true;break;case'insert':cvox.Api.speak(i.text,0);n=true;break;}};var a1=function(i){var j=i.row;var _=i.column;return!h[j]||!h[j][_];};var b1=function(j){h={};for(var i=0;i<j.length;i++){var _=j[i];var z1=_.row;var A1=_.column;if(!h[z1]){h[z1]={};}h[z1][A1]=_;}};var c1=function(i){var j=c.editor.getSession().getAnnotations();var _=j.filter(a1);if(_.length>0){cvox.Api.playEarcon(b);}b1(j);};var d1=function(i){var j=i.type+' '+i.text+' on '+f1(i.row,i.column);j=j.replace(';','semicolon');cvox.Api.speak(j,1);};var e1=function(i){var j=h[i];for(var _ in j){d1(j[_]);}};var f1=function(i,j){return'row '+(i+1)+' column '+(j+1);};var g1=function(){cvox.Api.speak(f1(l.row,l.column));};var h1=function(){for(var i in h){e1(i);}};var i1=function(){if(!t()){return;}switch(c.editor.keyBinding.$data.state){case I:cvox.Api.speak('Insert mode');break;case d:cvox.Api.speak('Command mode');break;}};var j1=function(){s=!s;if(s){cvox.Api.speak('Speak location on row change enabled.');}else{cvox.Api.speak('Speak location on row change disabled.');}};var k1=function(){k=!k;if(k){cvox.Api.speak('Speak displacement on column changes.');}else{cvox.Api.speak('Speak current character or word on column changes.');}};var l1=function(i){if(i.ctrlKey&&i.shiftKey){var j=o[i.keyCode];if(j){j.func();}}};var m1=function(i,j){if(!t()){return;}var _=j.keyBinding.$data.state;if(_===v){return;}switch(_){case I:cvox.Api.playEarcon(M);cvox.Api.setKeyEcho(true);break;case d:cvox.Api.playEarcon(M);cvox.Api.setKeyEcho(false);break;}v=_;};var n1=function(i){var j=i.detail['customCommand'];var _=p[j];if(_){_.func();c.editor.focus();}};var o1=function(){var i=r1.map(function(_){return{desc:_.desc+q(_.keyCode),cmd:_.cmd};});var j=document.querySelector('body');j.setAttribute('contextMenuActions',JSON.stringify(i));j.addEventListener('ATCustomEvent',n1,true);};var p1=function(i){if(i.match){J(l.row,0);}else{cvox.Api.playEarcon(N);}};var q1=function(){c.editor.focus();};var r1=[{keyCode:49,func:function(){e1(l.row);},cmd:f.SPEAK_ANNOT,desc:'Speak annotations on line'},{keyCode:50,func:h1,cmd:f.SPEAK_ALL_ANNOTS,desc:'Speak all annotations'},{keyCode:51,func:i1,cmd:f.SPEAK_MODE,desc:'Speak Vim mode'},{keyCode:52,func:j1,cmd:f.TOGGLE_LOCATION,desc:'Toggle speak row location'},{keyCode:53,func:g1,cmd:f.SPEAK_ROW_COL,desc:'Speak row and column'},{keyCode:54,func:k1,cmd:f.TOGGLE_DISPLACEMENT,desc:'Toggle speak displacement'},{keyCode:55,func:q1,cmd:f.FOCUS_TEXT,desc:'Focus text'}];var s1=function(_,i){c.editor=i;i.getSession().selection.on('changeCursor',Y);i.getSession().selection.on('changeSelection',Z);i.getSession().on('change',$);i.getSession().on('changeAnnotation',c1);i.on('changeStatus',m1);i.on('findSearchBox',p1);i.container.addEventListener('keydown',l1);l=i.selection.getCursor();};var t1=function(i){s1(null,i);r1.forEach(function(j){o[j.keyCode]=j;p[j.cmd]=j;});i.on('focus',s1);if(t()){cvox.Api.setKeyEcho(false);}o1();};function u1(){return(typeof(cvox)!=='undefined')&&cvox&&cvox.Api;}var v1=0;var w1=15;function x1(i){if(u1()){t1(i);}else{v1++;if(v1>=w1){return;}window.setTimeout(x1,500,i);}}var y1=r('../editor').Editor;r('../config').defineOptions(y1.prototype,'editor',{enableChromevoxEnhancements:{set:function(i){if(i){x1(this);}},value:true}});});(function(){ace.require(["ace/ext/chromevox"],function(){});})();
