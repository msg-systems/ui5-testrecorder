ace.define("ace/ext/beautify/php_rules",["require","exports","module","ace/token_iterator"],function(r,e,m){"use strict";var T=r("ace/token_iterator").TokenIterator;e.newLines=[{type:'support.php_tag',value:'<?php'},{type:'support.php_tag',value:'<?'},{type:'support.php_tag',value:'?>'},{type:'paren.lparen',value:'{',indent:true},{type:'paren.rparen',breakBefore:true,value:'}',indent:false},{type:'paren.rparen',breakBefore:true,value:'})',indent:false,dontBreak:true},{type:'comment'},{type:'text',value:';'},{type:'text',value:':',context:'php'},{type:'keyword',value:'case',indent:true,dontBreak:true},{type:'keyword',value:'default',indent:true,dontBreak:true},{type:'keyword',value:'break',indent:false,dontBreak:true},{type:'punctuation.doctype.end',value:'>'},{type:'meta.tag.punctuation.end',value:'>'},{type:'meta.tag.punctuation.begin',value:'<',blockTag:true,indent:true,dontBreak:true},{type:'meta.tag.punctuation.begin',value:'</',indent:false,breakBefore:true,dontBreak:true},{type:'punctuation.operator',value:';'}];e.spaces=[{type:'xml-pe',prepend:true},{type:'entity.other.attribute-name',prepend:true},{type:'storage.type',value:'var',append:true},{type:'storage.type',value:'function',append:true},{type:'keyword.operator',value:'='},{type:'keyword',value:'as',prepend:true,append:true},{type:'keyword',value:'function',append:true},{type:'support.function',next:/[^\(]/,append:true},{type:'keyword',value:'or',append:true,prepend:true},{type:'keyword',value:'and',append:true,prepend:true},{type:'keyword',value:'case',append:true},{type:'keyword.operator',value:'||',append:true,prepend:true},{type:'keyword.operator',value:'&&',append:true,prepend:true}];e.singleTags=['!doctype','area','base','br','hr','input','img','link','meta'];e.transform=function(a,b,c){var t=a.getCurrentToken();var n=e.newLines;var s=e.spaces;var d=e.singleTags;var f='';var g=0;var h=false;var j;var l;var k={};var o;var p={};var q=false;var v='';while(t!==null){console.log(t);if(!t){t=a.stepForward();continue;}if(t.type=='support.php_tag'&&t.value!='?>'){c='php';}else if(t.type=='support.php_tag'&&t.value=='?>'){c='html';}else if(t.type=='meta.tag.name.style'&&c!='css'){c='css';}else if(t.type=='meta.tag.name.style'&&c=='css'){c='html';}else if(t.type=='meta.tag.name.script'&&c!='js'){c='js';}else if(t.type=='meta.tag.name.script'&&c=='js'){c='html';}p=a.stepForward();if(p&&p.type.indexOf('meta.tag.name')==0){o=p.value;}if(k.type=='support.php_tag'&&k.value=='<?='){h=true;}if(t.type=='meta.tag.name'){t.value=t.value.toLowerCase();}if(t.type=='text'){t.value=t.value.trim();}if(!t.value){t=p;continue;}v=t.value;for(var i in s){if(t.type==s[i].type&&(!s[i].value||t.value==s[i].value)&&(p&&(!s[i].next||s[i].next.test(p.value)))){if(s[i].prepend){v=' '+t.value;}if(s[i].append){v+=' ';}}}if(t.type.indexOf('meta.tag.name')==0){j=t.value;}q=false;for(i in n){if(t.type==n[i].type&&(!n[i].value||t.value==n[i].value)&&(!n[i].blockTag||d.indexOf(o)===-1)&&(!n[i].context||n[i].context===c)){if(n[i].indent===false){g--;}if(n[i].breakBefore&&(!n[i].prev||n[i].prev.test(k.value))){f+="\n";q=true;for(i=0;i<g;i++){f+="\t";}}break;}}if(h===false){for(i in n){if(k.type==n[i].type&&(!n[i].value||k.value==n[i].value)&&(!n[i].blockTag||d.indexOf(j)===-1)&&(!n[i].context||n[i].context===c)){if(n[i].indent===true){g++;}if(!n[i].dontBreak&&!q){f+="\n";for(i=0;i<g;i++){f+="\t";}}break;}}}f+=v;if(k.type=='support.php_tag'&&k.value=='?>'){h=false;}l=j;k=t;t=p;if(t===null){break;}}return f;};});ace.define("ace/ext/beautify",["require","exports","module","ace/token_iterator","ace/ext/beautify/php_rules"],function(r,e,m){"use strict";var T=r("ace/token_iterator").TokenIterator;var p=r("./beautify/php_rules").transform;e.beautify=function(s){var i=new T(s,0,0);var t=i.getCurrentToken();var c=s.$modeId.split("/").pop();var a=p(i,c);s.doc.setValue(a);};e.commands=[{name:"beautify",exec:function(a){e.beautify(a.session);},bindKey:"Ctrl-Shift-B"}]});(function(){ace.require(["ace/ext/beautify"],function(){});})();
