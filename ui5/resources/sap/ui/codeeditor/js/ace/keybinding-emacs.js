ace.define("ace/occur",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/edit_session","ace/search_highlight","ace/lib/dom"],function(r,e,m){"use strict";var o=r("./lib/oop");var R=r("./range").Range;var S=r("./search").Search;var E=r("./edit_session").EditSession;var a=r("./search_highlight").SearchHighlight;function O(){}o.inherits(O,S);(function(){this.enter=function(b,c){if(!c.needle)return false;var p=b.getCursorPosition();this.displayOccurContent(b,c);var t=this.originalToOccurPosition(b.session,p);b.moveCursorToPosition(t);return true;};this.exit=function(b,c){var p=c.translatePosition&&b.getCursorPosition();var t=p&&this.occurToOriginalPosition(b.session,p);this.displayOriginalContent(b);if(t)b.moveCursorToPosition(t);return true;};this.highlight=function(s,b){var h=s.$occurHighlight=s.$occurHighlight||s.addDynamicMarker(new a(null,"ace_occur-highlight","text"));h.setRegexp(b);s._emit("changeBackMarker");};this.displayOccurContent=function(b,c){this.$originalSession=b.session;var f=this.matchingLines(b.session,c);var l=f.map(function(h){return h.content;});var g=new E(l.join('\n'));g.$occur=this;g.$occurMatchingLines=f;b.setSession(g);this.$useEmacsStyleLineStart=this.$originalSession.$useEmacsStyleLineStart;g.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart;this.highlight(g,c.re);g._emit('changeBackMarker');};this.displayOriginalContent=function(b){b.setSession(this.$originalSession);this.$originalSession.$useEmacsStyleLineStart=this.$useEmacsStyleLineStart;};this.originalToOccurPosition=function(s,p){var l=s.$occurMatchingLines;var n={row:0,column:0};if(!l)return n;for(var i=0;i<l.length;i++){if(l[i].row===p.row)return{row:i,column:p.column};}return n;};this.occurToOriginalPosition=function(s,p){var l=s.$occurMatchingLines;if(!l||!l[p.row])return p;return{row:l[p.row].row,column:p.column};};this.matchingLines=function(s,b){b=o.mixin({},b);if(!s||!b.needle)return[];var c=new S();c.set(b);return c.findAll(s).reduce(function(l,f){var g=f.start.row;var h=l[l.length-1];return h&&h.row===g?l:l.concat({row:g,content:s.getLine(g)});},[]);}}).call(O.prototype);var d=r('./lib/dom');d.importCssString(".ace_occur-highlight {\n    border-radius: 4px;\n    background-color: rgba(87, 255, 8, 0.25);\n    position: absolute;\n    z-index: 4;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    box-shadow: 0 0 4px rgb(91, 255, 50);\n}\n.ace_dark .ace_occur-highlight {\n    background-color: rgb(80, 140, 85);\n    box-shadow: 0 0 4px rgb(60, 120, 70);\n}\n","incremental-occur-highlighting");e.Occur=O;});ace.define("ace/commands/occur_commands",["require","exports","module","ace/config","ace/occur","ace/keyboard/hash_handler","ace/lib/oop"],function(r,e,m){var c=r("../config"),O=r("../occur").Occur;var o={name:"occur",exec:function(f,g){var h=!!f.session.$occur;var i=new O().enter(f,g);if(i&&!h)d.installIn(f);},readOnly:true};var a=[{name:"occurexit",bindKey:'esc|Ctrl-G',exec:function(f){var g=f.session.$occur;if(!g)return;g.exit(f,{});if(!f.session.$occur)d.uninstallFrom(f);},readOnly:true},{name:"occuraccept",bindKey:'enter',exec:function(f){var g=f.session.$occur;if(!g)return;g.exit(f,{translatePosition:true});if(!f.session.$occur)d.uninstallFrom(f);},readOnly:true}];var H=r("../keyboard/hash_handler").HashHandler;var b=r("../lib/oop");function d(){}b.inherits(d,H);(function(){this.isOccurHandler=true;this.attach=function(f){H.call(this,a,f.commands.platform);this.$editor=f;};var h=this.handleKeyboard;this.handleKeyboard=function(f,g,k,i){var j=h.call(this,f,g,k,i);return(j&&j.command)?j:undefined;}}).call(d.prototype);d.installIn=function(f){var h=new this();f.keyBinding.addKeyboardHandler(h);f.commands.addCommands(a);};d.uninstallFrom=function(f){f.commands.removeCommands(a);var h=f.getKeyboardHandler();if(h.isOccurHandler)f.keyBinding.removeKeyboardHandler(h);};e.occurStartCommand=o;});ace.define("ace/commands/incremental_search_commands",["require","exports","module","ace/config","ace/lib/oop","ace/keyboard/hash_handler","ace/commands/occur_commands"],function(r,a,m){var c=r("../config");var o=r("../lib/oop");var H=r("../keyboard/hash_handler").HashHandler;var b=r("./occur_commands").occurStartCommand;a.iSearchStartCommands=[{name:"iSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(d,f){c.loadModule(["core","ace/incremental_search"],function(e){var s=e.iSearch=e.iSearch||new e.IncrementalSearch();s.activate(d,f.backwards);if(f.jumpToFirstMatch)s.next(f);});},readOnly:true},{name:"iSearchBackwards",exec:function(e,j){e.execCommand('iSearch',{backwards:true});},readOnly:true},{name:"iSearchAndGo",bindKey:{win:"Ctrl-K",mac:"Command-G"},exec:function(e,j){e.execCommand('iSearch',{jumpToFirstMatch:true,useCurrentOrPrevSearch:true});},readOnly:true},{name:"iSearchBackwardsAndGo",bindKey:{win:"Ctrl-Shift-K",mac:"Command-Shift-G"},exec:function(e){e.execCommand('iSearch',{jumpToFirstMatch:true,backwards:true,useCurrentOrPrevSearch:true});},readOnly:true}];a.iSearchCommands=[{name:"restartSearch",bindKey:{win:"Ctrl-F",mac:"Command-F"},exec:function(s){s.cancelSearch(true);}},{name:"searchForward",bindKey:{win:"Ctrl-S|Ctrl-K",mac:"Ctrl-S|Command-G"},exec:function(s,d){d.useCurrentOrPrevSearch=true;s.next(d);}},{name:"searchBackward",bindKey:{win:"Ctrl-R|Ctrl-Shift-K",mac:"Ctrl-R|Command-Shift-G"},exec:function(s,d){d.useCurrentOrPrevSearch=true;d.backwards=true;s.next(d);}},{name:"extendSearchTerm",exec:function(s,d){s.addString(d);}},{name:"extendSearchTermSpace",bindKey:"space",exec:function(s){s.addString(' ');}},{name:"shrinkSearchTerm",bindKey:"backspace",exec:function(s){s.removeChar();}},{name:'confirmSearch',bindKey:'return',exec:function(s){s.deactivate();}},{name:'cancelSearch',bindKey:'esc|Ctrl-G',exec:function(s){s.deactivate(true);}},{name:'occurisearch',bindKey:'Ctrl-O',exec:function(s){var d=o.mixin({},s.$options);s.deactivate();b.exec(s.$editor,d);}},{name:"yankNextWord",bindKey:"Ctrl-w",exec:function(s){var e=s.$editor,d=e.selection.getRangeOfMovements(function(g){g.moveCursorWordRight();}),f=e.session.getTextRange(d);s.addString(f);}},{name:"yankNextChar",bindKey:"Ctrl-Alt-y",exec:function(s){var e=s.$editor,d=e.selection.getRangeOfMovements(function(g){g.moveCursorRight();}),f=e.session.getTextRange(d);s.addString(f);}},{name:'recenterTopBottom',bindKey:'Ctrl-l',exec:function(s){s.$editor.execCommand('recenterTopBottom');}},{name:'selectAllMatches',bindKey:'Ctrl-space',exec:function(s){var e=s.$editor,h=e.session.$isearchHighlight,d=h&&h.cache?h.cache.reduce(function(d,f){return d.concat(f?f:[]);},[]):[];s.deactivate(false);d.forEach(e.selection.addRange.bind(e.selection));}},{name:'searchAsRegExp',bindKey:'Alt-r',exec:function(s){s.convertNeedleToRegExp();}}].map(function(d){d.readOnly=true;d.isIncrementalSearchCommand=true;d.scrollIntoView="animate-cursor";return d;});function I(s){this.$iSearch=s;}o.inherits(I,H);(function(){this.attach=function(d){var s=this.$iSearch;H.call(this,a.iSearchCommands,d.commands.platform);this.$commandExecHandler=d.commands.addEventListener('exec',function(e){if(!e.command.isIncrementalSearchCommand)return s.deactivate();e.stopPropagation();e.preventDefault();var f=d.session.getScrollTop();var g=e.command.exec(s,e.args||{});d.renderer.scrollCursorIntoView(null,0.5);d.renderer.animateScrolling(f);return g;});};this.detach=function(e){if(!this.$commandExecHandler)return;e.commands.removeEventListener('exec',this.$commandExecHandler);delete this.$commandExecHandler;};var h=this.handleKeyboard;this.handleKeyboard=function(d,e,k,f){if(((e===1||e===8)&&k==='v')||(e===1&&k==='y'))return null;var g=h.call(this,d,e,k,f);if(g.command){return g;}if(e==-1){var i=this.commands.extendSearchTerm;if(i){return{command:i,args:k};}}return false;};}).call(I.prototype);a.IncrementalSearchKeyboardHandler=I;});ace.define("ace/incremental_search",["require","exports","module","ace/lib/oop","ace/range","ace/search","ace/search_highlight","ace/commands/incremental_search_commands","ace/lib/dom","ace/commands/command_manager","ace/editor","ace/config"],function(r,a,m){"use strict";var o=r("./lib/oop");var R=r("./range").Range;var S=r("./search").Search;var b=r("./search_highlight").SearchHighlight;var i=r("./commands/incremental_search_commands");var I=i.IncrementalSearchKeyboardHandler;function d(){this.$options={wrap:false,skipCurrent:false};this.$keyboardHandler=new I(this);}o.inherits(d,S);function f(c){return c instanceof RegExp;}function g(c){var s=String(c),e=s.indexOf('/'),n=s.lastIndexOf('/');return{expression:s.slice(e+1,n),flags:s.slice(n+1)}}function h(s,c){try{return new RegExp(s,c);}catch(e){return s;}}function j(c){return h(c.expression,c.flags);}(function(){this.activate=function(e,c){this.$editor=e;this.$startPos=this.$currentPos=e.getCursorPosition();this.$options.needle='';this.$options.backwards=c;e.keyBinding.addKeyboardHandler(this.$keyboardHandler);this.$originalEditorOnPaste=e.onPaste;e.onPaste=this.onPaste.bind(this);this.$mousedownHandler=e.addEventListener('mousedown',this.onMouseDown.bind(this));this.selectionFix(e);this.statusMessage(true);};this.deactivate=function(c){this.cancelSearch(c);var e=this.$editor;e.keyBinding.removeKeyboardHandler(this.$keyboardHandler);if(this.$mousedownHandler){e.removeEventListener('mousedown',this.$mousedownHandler);delete this.$mousedownHandler;}e.onPaste=this.$originalEditorOnPaste;this.message('');};this.selectionFix=function(e){if(e.selection.isEmpty()&&!e.session.$emacsMark){e.clearSelection();}};this.highlight=function(c){var s=this.$editor.session,e=s.$isearchHighlight=s.$isearchHighlight||s.addDynamicMarker(new b(null,"ace_isearch-result","text"));e.setRegexp(c);s._emit("changeBackMarker");};this.cancelSearch=function(c){var e=this.$editor;this.$prevNeedle=this.$options.needle;this.$options.needle='';if(c){e.moveCursorToPosition(this.$startPos);this.$currentPos=this.$startPos;}else{e.pushEmacsMark&&e.pushEmacsMark(this.$startPos,false);}this.highlight(null);return R.fromPoints(this.$currentPos,this.$currentPos);};this.highlightAndFindWithNeedle=function(c,n){if(!this.$editor)return null;var e=this.$options;if(n){e.needle=n.call(this,e.needle||'')||'';}if(e.needle.length===0){this.statusMessage(true);return this.cancelSearch(true);}e.start=this.$currentPos;var s=this.$editor.session,p=this.find(s),q=this.$editor.emacsMark?!!this.$editor.emacsMark():!this.$editor.selection.isEmpty();if(p){if(e.backwards)p=R.fromPoints(p.end,p.start);this.$editor.selection.setRange(R.fromPoints(q?this.$startPos:p.end,p.end));if(c)this.$currentPos=p.end;this.highlight(e.re);}this.statusMessage(p);return p;};this.addString=function(s){return this.highlightAndFindWithNeedle(false,function(n){if(!f(n))return n+s;var c=g(n);c.expression+=s;return j(c);});};this.removeChar=function(c){return this.highlightAndFindWithNeedle(false,function(n){if(!f(n))return n.substring(0,n.length-1);var e=g(n);e.expression=e.expression.substring(0,e.expression.length-1);return j(e);});};this.next=function(c){c=c||{};this.$options.backwards=!!c.backwards;this.$currentPos=this.$editor.getCursorPosition();return this.highlightAndFindWithNeedle(true,function(n){return c.useCurrentOrPrevSearch&&n.length===0?this.$prevNeedle||'':n;});};this.onMouseDown=function(e){this.deactivate();return true;};this.onPaste=function(t){this.addString(t);};this.convertNeedleToRegExp=function(){return this.highlightAndFindWithNeedle(false,function(n){return f(n)?n:h(n,'ig');});};this.convertNeedleToString=function(){return this.highlightAndFindWithNeedle(false,function(n){return f(n)?g(n).expression:n;});};this.statusMessage=function(c){var e=this.$options,n='';n+=e.backwards?'reverse-':'';n+='isearch: '+e.needle;n+=c?'':' (not found)';this.message(n);};this.message=function(c){if(this.$editor.showCommandLine){this.$editor.showCommandLine(c);this.$editor.focus();}else{console.log(c);}};}).call(d.prototype);a.IncrementalSearch=d;var k=r('./lib/dom');k.importCssString&&k.importCssString(".ace_marker-layer .ace_isearch-result {  position: absolute;  z-index: 6;  -moz-box-sizing: border-box;  -webkit-box-sizing: border-box;  box-sizing: border-box;}div.ace_isearch-result {  border-radius: 4px;  background-color: rgba(255, 200, 0, 0.5);  box-shadow: 0 0 4px rgb(255, 200, 0);}.ace_dark div.ace_isearch-result {  background-color: rgb(100, 110, 160);  box-shadow: 0 0 4px rgb(80, 90, 140);}","incremental-search-highlighting");var l=r("./commands/command_manager");(function(){this.setupIncrementalSearch=function(e,v){if(this.usesIncrementalSearch==v)return;this.usesIncrementalSearch=v;var s=i.iSearchStartCommands;var c=v?'addCommands':'removeCommands';this[c](s);};}).call(l.CommandManager.prototype);var E=r("./editor").Editor;r("./config").defineOptions(E.prototype,"editor",{useIncrementalSearch:{set:function(v){this.keyBinding.$handlers.forEach(function(c){if(c.setupIncrementalSearch){c.setupIncrementalSearch(this,v);}});this._emit('incrementalSearchSettingChanged',{isEnabled:v});}}});});ace.define("ace/keyboard/emacs",["require","exports","module","ace/lib/dom","ace/incremental_search","ace/commands/incremental_search_commands","ace/keyboard/hash_handler","ace/lib/keys"],function(a,b,m){"use strict";var d=a("../lib/dom");a("../incremental_search");var s=a("../commands/incremental_search_commands");var f=function(x,y){var c=this.scroller.getBoundingClientRect();var e=Math.floor((x+this.scrollLeft-c.left-this.$padding)/this.characterWidth);var r=Math.floor((y+this.scrollTop-c.top)/this.lineHeight);return this.session.screenToDocumentPosition(r,e);};var H=a("./hash_handler").HashHandler;b.handler=new H();b.handler.isEmacs=true;b.handler.$id="ace/keyboard/emacs";var g=false;var $;var j;b.handler.attach=function(e){if(!g){g=true;d.importCssString('            .emacs-mode .ace_cursor{                border: 1px rgba(50,250,50,0.8) solid!important;                -moz-box-sizing: border-box!important;                -webkit-box-sizing: border-box!important;                box-sizing: border-box!important;                background-color: rgba(0,250,0,0.9);                opacity: 0.5;            }            .emacs-mode .ace_hidden-cursors .ace_cursor{                opacity: 1;                background-color: transparent;            }            .emacs-mode .ace_overwrite-cursors .ace_cursor {                opacity: 1;                background-color: transparent;                border-width: 0 0 2px 2px !important;            }            .emacs-mode .ace_text-layer {                z-index: 4            }            .emacs-mode .ace_cursor-layer {                z-index: 2            }','emacsMode');}$=e.session.$selectLongWords;e.session.$selectLongWords=true;j=e.session.$useEmacsStyleLineStart;e.session.$useEmacsStyleLineStart=true;e.session.$emacsMark=null;e.session.$emacsMarkRing=e.session.$emacsMarkRing||[];e.emacsMark=function(){return this.session.$emacsMark;};e.setEmacsMark=function(p){this.session.$emacsMark=p;};e.pushEmacsMark=function(p,c){var h=this.session.$emacsMark;if(h)this.session.$emacsMarkRing.push(h);if(!p||c)this.setEmacsMark(p);else this.session.$emacsMarkRing.push(p);};e.popEmacsMark=function(){var c=this.emacsMark();if(c){this.setEmacsMark(null);return c;}return this.session.$emacsMarkRing.pop();};e.getLastEmacsMark=function(p){return this.session.$emacsMark||this.session.$emacsMarkRing.slice(-1)[0];};e.emacsMarkForSelection=function(r){var c=this.selection,h=this.multiSelect?this.multiSelect.getAllRanges().length:1,i=c.index||0,n=this.session.$emacsMarkRing,p=n.length-(h-i),v=n[p]||c.anchor;if(r){n.splice(p,1,"row"in r&&"column"in r?r:undefined);}return v;};e.on("click",l);e.on("changeSession",k);e.renderer.screenToTextCoordinates=f;e.setStyle("emacs-mode");e.commands.addCommands(u);b.handler.platform=e.commands.platform;e.$emacsModeHandler=this;e.addEventListener('copy',this.onCopy);e.addEventListener('paste',this.onPaste);};b.handler.detach=function(e){delete e.renderer.screenToTextCoordinates;e.session.$selectLongWords=$;e.session.$useEmacsStyleLineStart=j;e.removeEventListener("click",l);e.removeEventListener("changeSession",k);e.unsetStyle("emacs-mode");e.commands.removeCommands(u);e.removeEventListener('copy',this.onCopy);e.removeEventListener('paste',this.onPaste);e.$emacsModeHandler=null;};var k=function(e){if(e.oldSession){e.oldSession.$selectLongWords=$;e.oldSession.$useEmacsStyleLineStart=j;}$=e.session.$selectLongWords;e.session.$selectLongWords=true;j=e.session.$useEmacsStyleLineStart;e.session.$useEmacsStyleLineStart=true;if(!e.session.hasOwnProperty('$emacsMark'))e.session.$emacsMark=null;if(!e.session.hasOwnProperty('$emacsMarkRing'))e.session.$emacsMarkRing=[];};var l=function(e){e.editor.session.$emacsMark=null;};var o=a("../lib/keys").KEY_MODS;var q={C:"ctrl",S:"shift",M:"alt",CMD:"command"};var t=["C-S-M-CMD","S-M-CMD","C-M-CMD","C-S-CMD","C-S-M","M-CMD","S-CMD","S-M","C-CMD","C-M","C-S","CMD","M","S","C"];t.forEach(function(c){var h=0;c.split("-").forEach(function(c){h=h|o[q[c]];});q[h]=c.toLowerCase()+"-";});b.handler.onCopy=function(e,c){if(c.$handlesEmacsOnCopy)return;c.$handlesEmacsOnCopy=true;b.handler.commands.killRingSave.exec(c);c.$handlesEmacsOnCopy=false;};b.handler.onPaste=function(e,c){c.pushEmacsMark(c.getCursorPosition());};b.handler.bindKey=function(c,e){if(typeof c=="object")c=c[this.platform];if(!c)return;var h=this.commandKeyBinding;c.split("|").forEach(function(n){n=n.toLowerCase();h[n]=e;var p=n.split(" ").slice(0,-1);p.reduce(function(r,n,i){var v=r[i-1]?r[i-1]+' ':'';return r.concat([v+n]);},[]).forEach(function(n){if(!h[n])h[n]="null";});},this);};b.handler.getStatusText=function(e,c){var h="";if(c.count)h+=c.count;if(c.keyChain)h+=" "+c.keyChain;return h;};b.handler.handleKeyboard=function(c,h,e,n){if(n===-1)return undefined;var p=c.editor;p._signal("changeStatus");if(h==-1){p.pushEmacsMark();if(c.count){var r=new Array(c.count+1).join(e);c.count=null;return{command:"insertstring",args:r};}}var v=q[h];if(v=="c-"||c.count){var w=parseInt(e[e.length-1]);if(typeof w==='number'&&!isNaN(w)){c.count=Math.max(c.count,0)||0;c.count=10*c.count+w;return{command:"null"};}}if(v)e=v+e;if(c.keyChain)e=c.keyChain+=" "+e;var x=this.commandKeyBinding[e];c.keyChain=x=="null"?e:"";if(!x)return undefined;if(x==="null")return{command:"null"};if(x==="universalArgument"){c.count=-4;return{command:"null"};}var y;if(typeof x!=="string"){y=x.args;if(x.command)x=x.command;if(x==="goorselect"){x=p.emacsMark()?y[1]:y[0];y=null;}}if(typeof x==="string"){if(x==="insertstring"||x==="splitline"||x==="togglecomment"){p.pushEmacsMark();}x=this.commands[x]||p.commands.commands[x];if(!x)return undefined;}if(!x.readOnly&&!x.isYank)c.lastCommand=null;if(!x.readOnly&&p.emacsMark())p.setEmacsMark(null);if(c.count){var w=c.count;c.count=0;if(!x||!x.handlesCount){return{args:y,command:{exec:function(p,y){for(var i=0;i<w;i++)x.exec(p,y);},multiSelectAction:x.multiSelectAction}};}else{if(!y)y={};if(typeof y==='object')y.count=w;}}return{command:x,args:y};};b.emacsKeys={"Up|C-p":{command:"goorselect",args:["golineup","selectup"]},"Down|C-n":{command:"goorselect",args:["golinedown","selectdown"]},"Left|C-b":{command:"goorselect",args:["gotoleft","selectleft"]},"Right|C-f":{command:"goorselect",args:["gotoright","selectright"]},"C-Left|M-b":{command:"goorselect",args:["gotowordleft","selectwordleft"]},"C-Right|M-f":{command:"goorselect",args:["gotowordright","selectwordright"]},"Home|C-a":{command:"goorselect",args:["gotolinestart","selecttolinestart"]},"End|C-e":{command:"goorselect",args:["gotolineend","selecttolineend"]},"C-Home|S-M-,":{command:"goorselect",args:["gotostart","selecttostart"]},"C-End|S-M-.":{command:"goorselect",args:["gotoend","selecttoend"]},"S-Up|S-C-p":"selectup","S-Down|S-C-n":"selectdown","S-Left|S-C-b":"selectleft","S-Right|S-C-f":"selectright","S-C-Left|S-M-b":"selectwordleft","S-C-Right|S-M-f":"selectwordright","S-Home|S-C-a":"selecttolinestart","S-End|S-C-e":"selecttolineend","S-C-Home":"selecttostart","S-C-End":"selecttoend","C-l":"recenterTopBottom","M-s":"centerselection","M-g":"gotoline","C-x C-p":"selectall","C-Down":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"C-Up":{command:"goorselect",args:["gotopageup","selectpageup"]},"PageDown|C-v":{command:"goorselect",args:["gotopagedown","selectpagedown"]},"PageUp|M-v":{command:"goorselect",args:["gotopageup","selectpageup"]},"S-C-Down":"selectpagedown","S-C-Up":"selectpageup","C-s":"iSearch","C-r":"iSearchBackwards","M-C-s":"findnext","M-C-r":"findprevious","S-M-5":"replace","Backspace":"backspace","Delete|C-d":"del","Return|C-m":{command:"insertstring",args:"\n"},"C-o":"splitline","M-d|C-Delete":{command:"killWord",args:"right"},"C-Backspace|M-Backspace|M-Delete":{command:"killWord",args:"left"},"C-k":"killLine","C-y|S-Delete":"yank","M-y":"yankRotate","C-g":"keyboardQuit","C-w|C-S-W":"killRegion","M-w":"killRingSave","C-Space":"setMark","C-x C-x":"exchangePointAndMark","C-t":"transposeletters","M-u":"touppercase","M-l":"tolowercase","M-/":"autocomplete","C-u":"universalArgument","M-;":"togglecomment","C-/|C-x u|S-C--|C-z":"undo","S-C-/|S-C-x u|C--|S-C-z":"redo","C-x r":"selectRectangularRegion","M-x":{command:"focusCommandLine",args:"M-x "}};b.handler.bindKeys(b.emacsKeys);b.handler.addCommands({recenterTopBottom:function(e){var r=e.renderer;var p=r.$cursorLayer.getPixelPosition();var h=r.$size.scrollerHeight-r.lineHeight;var c=r.scrollTop;if(Math.abs(p.top-c)<2){c=p.top-h;}else if(Math.abs(p.top-c-h*0.5)<2){c=p.top;}else{c=p.top-h*0.5;}e.session.setScrollTop(c);},selectRectangularRegion:function(e){e.multiSelect.toggleBlockSelection();},setMark:{exec:function(e,c){if(c&&c.count){if(e.inMultiSelectMode)e.forEachSelection(w);else w();w();return;}var h=e.emacsMark(),i=e.selection.getAllRanges(),n=i.map(function(r){return{row:r.start.row,column:r.start.column};}),p=true,v=i.every(function(r){return r.isEmpty();});if(p&&(h||!v)){if(e.inMultiSelectMode)e.forEachSelection({exec:e.clearSelection.bind(e)});else e.clearSelection();if(h)e.pushEmacsMark(null);return;}if(!h){n.forEach(function(r){e.pushEmacsMark(r);});e.setEmacsMark(n[n.length-1]);return;}function w(){var h=e.popEmacsMark();h&&e.moveCursorToPosition(h);}},readOnly:true,handlesCount:true},exchangePointAndMark:{exec:function exchangePointAndMark$exec(e,c){var h=e.selection;if(!c.count&&!h.isEmpty()){h.setSelectionRange(h.getRange(),!h.isBackwards());return;}if(c.count){var p={row:h.lead.row,column:h.lead.column};h.clearSelection();h.moveCursorToPosition(e.emacsMarkForSelection(p));}else{h.selectToPosition(e.emacsMarkForSelection());}},readOnly:true,handlesCount:true,multiSelectAction:"forEach"},killWord:{exec:function(e,c){e.clearSelection();if(c=="left")e.selection.selectWordLeft();else e.selection.selectWordRight();var r=e.getSelectionRange();var h=e.session.getTextRange(r);b.killRing.add(h);e.session.remove(r);e.clearSelection();},multiSelectAction:"forEach"},killLine:function(e){e.pushEmacsMark(null);e.clearSelection();var r=e.getSelectionRange();var c=e.session.getLine(r.start.row);r.end.column=c.length;c=c.substr(r.start.column);var h=e.session.getFoldLine(r.start.row);if(h&&r.end.row!=h.end.row){r.end.row=h.end.row;c="x";}if(/^\s*$/.test(c)){r.end.row++;c=e.session.getLine(r.end.row);r.end.column=/^\s*$/.test(c)?c.length:0;}var i=e.session.getTextRange(r);if(e.prevOp.command==this)b.killRing.append(i);else b.killRing.add(i);e.session.remove(r);e.clearSelection();},yank:function(e){e.onPaste(b.killRing.get()||'');e.keyBinding.$data.lastCommand="yank";},yankRotate:function(e){if(e.keyBinding.$data.lastCommand!="yank")return;e.undo();e.session.$emacsMarkRing.pop();e.onPaste(b.killRing.rotate());e.keyBinding.$data.lastCommand="yank";},killRegion:{exec:function(e){b.killRing.add(e.getCopyText());e.commands.byName.cut.exec(e);e.setEmacsMark(null);},readOnly:true,multiSelectAction:"forEach"},killRingSave:{exec:function(e){e.$handlesEmacsOnCopy=true;var c=e.session.$emacsMarkRing.slice(),h=[];b.killRing.add(e.getCopyText());setTimeout(function(){function i(){var n=e.selection,r=n.getRange(),p=n.isBackwards()?r.end:r.start;h.push({row:p.row,column:p.column});n.clearSelection();}e.$handlesEmacsOnCopy=false;if(e.inMultiSelectMode)e.forEachSelection({exec:i});else i();e.session.$emacsMarkRing=c.concat(h.reverse());},0);},readOnly:true},keyboardQuit:function(e){e.selection.clearSelection();e.setEmacsMark(null);e.keyBinding.$data.count=null;},focusCommandLine:function(e,c){if(e.showCommandLine)e.showCommandLine(c);}});b.handler.addCommands(s.iSearchStartCommands);var u=b.handler.commands;u.yank.isYank=true;u.yankRotate.isYank=true;b.killRing={$data:[],add:function(c){c&&this.$data.push(c);if(this.$data.length>30)this.$data.shift();},append:function(c){var i=this.$data.length-1;var e=this.$data[i]||"";if(c)e+=c;if(e)this.$data[i]=e;},get:function(n){n=n||1;return this.$data.slice(this.$data.length-n,this.$data.length).reverse().join('\n');},pop:function(){if(this.$data.length>1)this.$data.pop();return this.get();},rotate:function(){this.$data.unshift(this.$data.pop());return this.get();}};});
