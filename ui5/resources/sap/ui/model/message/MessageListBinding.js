/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/model/ChangeReason','sap/ui/model/ClientListBinding',"sap/base/strings/hash","sap/base/util/array/diff","sap/base/util/deepEqual","sap/ui/thirdparty/jquery"],function(C,a,h,d,b,q){"use strict";var M=a.extend("sap.ui.model.message.MessageListBinding");M.prototype.getContexts=function(s,l){this.iLastStartIndex=s;this.iLastLength=l;if(!s){s=0;}if(!l){l=Math.min(this.iLength,this.oModel.iSizeLimit);}var c=this._getContexts(s,l),e=[];if(this.bUseExtendedChangeDetection){for(var i=0;i<c.length;i++){e.push(this.getContextData(c[i]));}if(this.aLastContexts&&s<this.iLastEndIndex){var t=this;c.diff=d(this.aLastContextData,c,function(v){if(typeof v!=="string"){return t.getContextData(v);}return h(v);});}this.iLastEndIndex=s+l;this.aLastContexts=c.slice(0);this.aLastContextData=e.slice(0);}return c;};M.prototype.getEntryData=function(c){var o=c.getObject();var p=o.processor;delete o.processor;var j=JSON.stringify(o);o.processor=p;return j;};M.prototype.update=function(){var l=this.oModel._getObject(this.sPath,this.oContext);if(Array.isArray(l)){if(this.bUseExtendedChangeDetection){this.oList=q.extend(true,[],l);}else{this.oList=l.slice(0);}this.updateIndices();this.applyFilter();this.applySort();this.iLength=this._getLength();}else{this.oList=[];this.aIndices=[];this.iLength=0;}};M.prototype.checkUpdate=function(f){if(this.bSuspended&&!this.bIgnoreSuspend){return;}if(!this.bUseExtendedChangeDetection){var l=this.oModel._getObject(this.sPath,this.oContext);if(!b(this.oList,l)||f){this.update();this._fireChange({reason:C.Change});}}else{var c=false;var t=this;var l=this.oModel._getObject(this.sPath,this.oContext);if(!b(this.oList,l)){this.update();}var e=this._getContexts(this.iLastStartIndex,this.iLastLength);if(this.aLastContexts){if(this.aLastContexts.length!=e.length){c=true;}else{q.each(this.aLastContextData,function(i,L){if(t.getContextData(e[i])!==L){c=true;return false;}});}}else{c=true;}if(c||f){this._fireChange({reason:C.Change});}}};return M;});
