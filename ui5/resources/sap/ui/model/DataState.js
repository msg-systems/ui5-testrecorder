/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery",'../base/Object',"sap/base/util/deepEqual"],function(q,B,d){"use strict";var D=B.extend("sap.ui.model.DataState",{metadata:{},constructor:function(){this.mProperties={modelMessages:[],controlMessages:[],laundering:false,originalValue:undefined,originalInternalValue:undefined,value:undefined,invalidValue:undefined,internalValue:undefined,dirty:false,messages:[]};this.mChangedProperties=Object.assign({},this.mProperties);}});D.prototype._sortMessages=function(m){var s={'Error':0,'Warning':1,'Success':2,'Info':3};m.sort(function(a,b){return s[a.type]-s[b.type];});};D.prototype.setProperty=function(p,v){this.mChangedProperties[p]=v;return this;};D.prototype.calculateChanges=function(){for(var p in this.mChangedProperties){var c=this.mChangedProperties[p].value;if(!d(this.mProperties[p],c)){if(Array.isArray(c)){c=c.slice(0);}this.mProperties[p]=c;}}return this;};D.prototype.getProperty=function(p){return this.mChangedProperties[p];};D.prototype.getMessages=function(){var m=[];var c=this.mChangedProperties['controlMessages'];var M=this.mChangedProperties['modelMessages'];if(M||c){m=m.concat(M?M:[],c?c:[]);this._sortMessages(m);}return m;};D.prototype._getOldMessages=function(){var m=[];var c=this.mProperties['controlMessages'];var M=this.mProperties['modelMessages'];if(M||c){m=m.concat(M?M:[],c?c:[]);this._sortMessages(m);}return m;};D.prototype.setModelMessages=function(m){this.mChangedProperties["modelMessages"]=m||[];return this;};D.prototype.getModelMessages=function(){return this.getProperty("modelMessages");};D.prototype.setControlMessages=function(m){this.mChangedProperties["controlMessages"]=m||[];return this;};D.prototype.getControlMessages=function(){return this.getProperty("controlMessages");};D.prototype.isDirty=function(){var v=this.mChangedProperties["value"];var o=this.mChangedProperties["originalValue"];var c=this.mChangedProperties["invalidValue"]!==undefined;return c||!d(v,o);};D.prototype.isControlDirty=function(){return this.mChangedProperties["invalidValue"]!==undefined;};D.prototype.isLaundering=function(){return this.mChangedProperties["laundering"];};D.prototype.setLaundering=function(l){this.mChangedProperties["laundering"]=l;return this;};D.prototype.getValue=function(v){return this.getProperty("value");};D.prototype.setValue=function(v){this.mChangedProperties["value"]=v;return this;};D.prototype.getInvalidValue=function(){return this.getProperty("invalidValue");};D.prototype.setInvalidValue=function(i){this.mChangedProperties["invalidValue"]=i;return this;};D.prototype.getOriginalValue=function(){return this.getProperty("originalValue");};D.prototype.setOriginalValue=function(o){this.mChangedProperties["originalValue"]=o;return this;};D.prototype.changed=function(n){if(n===false){this.mProperties=Object.assign({},this.mChangedProperties);}return!d(this.mChangedProperties,this.mProperties);};D.prototype.getChanges=function(){var c={};q.each(this.mChangedProperties,function(p,v){if(!d(this.mChangedProperties[p],this.mProperties[p])){c[p]={};c[p].value=this.mChangedProperties[p];c[p].oldValue=this.mProperties[p];}}.bind(this));var m=this.getMessages();var o=this._getOldMessages();if(m.length>0||o.length>0){c["messages"]={};c["messages"].oldValue=o;c["messages"].value=m;}return c;};return D;});
