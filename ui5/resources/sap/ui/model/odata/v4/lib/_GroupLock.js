/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2018 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/SyncPromise"],function(S){"use strict";function _(g,l,o){this.sGroupId=g;this.bLocked=l;this.oOwner=o;this.mPromiseForGroup={};this.mResolveFunctionForGroup={};}_.prototype.getGroupId=function(){return this.sGroupId;};_.prototype.getUnlockedCopy=function(){return new _(this.sGroupId);};_.prototype.isLocked=function(){return this.bLocked;};_.prototype.setGroupId=function(g){if(!this.sGroupId){this.sGroupId=g;for(g in this.mResolveFunctionForGroup){if(this.sGroupId!==g){this.mResolveFunctionForGroup[g]();delete this.mPromiseForGroup[g];delete this.mResolveFunctionForGroup[g];}}}};_.prototype.toString=function(){var d="sap.ui.model.odata.v4.lib._GroupLock("+(this.isLocked()?"locked":"unlocked");if(this.sGroupId){d+=",group="+this.sGroupId;}if(this.oOwner){d+=",owner="+this.oOwner;}return d+")";};_.prototype.unlock=function(f){var g;if(!this.mPromiseForGroup&&!f){throw new Error("GroupLock unlocked twice");}this.mPromiseForGroup=null;this.bLocked=false;for(g in this.mResolveFunctionForGroup){this.mResolveFunctionForGroup[g]();}this.mResolveFunctionForGroup=null;};_.prototype.waitFor=function(g){var t=this;if(this.bLocked&&(!this.sGroupId||this.sGroupId===g)){if(!t.mPromiseForGroup[g]){t.mPromiseForGroup[g]=new S(function(r){t.mResolveFunctionForGroup[g]=r;});}return t.mPromiseForGroup[g];}};_.$cached=new _("$cached");_.$cached.unlock=function(){};return _;},false);
